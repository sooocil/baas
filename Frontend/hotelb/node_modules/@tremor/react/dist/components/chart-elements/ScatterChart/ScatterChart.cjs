'use client';
"use strict";var e=require("tslib"),t=require("react"),a=require("recharts"),l=require("../common/ChartLegend.cjs"),r=require("./ScatterChartTooltip.cjs"),o=require("../common/NoData.cjs"),i=require("../common/utils.cjs"),n=require("../../../lib/constants.cjs"),s=require("../../../lib/theme.cjs"),u=require("../../../lib/tremorTwMerge.cjs"),c=require("../../../lib/utils.cjs");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=d(t);const v=m.default.forwardRef(((d,v)=>{const{data:g=[],x:y,y:f,size:p,category:h,colors:x=s.themeColorRange,showOpacity:w=!1,sizeRange:k=[1,1e3],valueFormatter:b={x:c.defaultValueFormatter,y:c.defaultValueFormatter,size:c.defaultValueFormatter},startEndOnly:C=!1,showXAxis:E=!0,showYAxis:T=!0,yAxisWidth:A=56,intervalType:V="equidistantPreserveStart",animationDuration:D=900,showAnimation:q=!1,showTooltip:L=!0,showLegend:j=!0,showGridLines:S=!0,autoMinXValue:N=!1,minXValue:O,maxXValue:X,autoMinYValue:Y=!1,minYValue:M,maxYValue:F,allowDecimals:G=!0,noDataText:z,onValueChange:R,customTooltip:P,rotateLabelX:B,className:K,enableLegendSlider:W=!1,tickGap:_=5}=d,H=e.__rest(d,["data","x","y","size","category","colors","showOpacity","sizeRange","valueFormatter","startEndOnly","showXAxis","showYAxis","yAxisWidth","intervalType","animationDuration","showAnimation","showTooltip","showLegend","showGridLines","autoMinXValue","minXValue","maxXValue","autoMinYValue","minYValue","maxYValue","allowDecimals","noDataText","onValueChange","customTooltip","rotateLabelX","className","enableLegendSlider","tickGap"]),Z=P,[$,I]=t.useState(60),[J,Q]=m.default.useState(void 0),[U,ee]=t.useState(void 0),te=!!R;function ae(e,t,a){a.stopPropagation(),te&&(i.deepEqual(J,e.node)?(ee(void 0),Q(void 0),null==R||R(null)):(Q(e.node),ee(e.payload[h]),null==R||R(Object.assign({eventType:"bubble",categoryClicked:e.payload[h]},e.payload))))}const le=i.constructCategories(g,h),re=i.constructCategoryColors(le,x),oe=i.getYAxisDomain(N,O,X),ie=i.getYAxisDomain(Y,M,F);return m.default.createElement("div",Object.assign({ref:v,className:u.tremorTwMerge("w-full h-80",K)},H),m.default.createElement(a.ResponsiveContainer,{className:"h-full w-full"},(null==g?void 0:g.length)?m.default.createElement(a.ScatterChart,{onClick:te&&(U||J)?()=>{Q(void 0),ee(void 0),null==R||R(null)}:void 0,margin:{left:20,right:20}},S?m.default.createElement(a.CartesianGrid,{className:u.tremorTwMerge("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:!0,vertical:!0}):null,y?m.default.createElement(a.XAxis,{hide:!E,dataKey:y,interval:C?"preserveStartEnd":V,tick:{transform:"translate(0, 6)"},ticks:C?[g[0][y],g[g.length-1][y]]:void 0,type:"number",name:y,fill:"",stroke:"",className:u.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,tickFormatter:b.x,axisLine:!1,minTickGap:_,domain:oe,allowDataOverflow:!0,angle:null==B?void 0:B.angle,dy:null==B?void 0:B.verticalShift,height:null==B?void 0:B.xAxisHeight}):null,f?m.default.createElement(a.YAxis,{width:A,hide:!T,axisLine:!1,tickLine:!1,dataKey:f,type:"number",name:f,domain:ie,tick:{transform:"translate(-3, 0)"},tickFormatter:b.y,fill:"",stroke:"",className:u.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),allowDecimals:G,allowDataOverflow:!0}):null,m.default.createElement(a.Tooltip,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{stroke:"#d1d5db",strokeWidth:1},content:L?({active:e,payload:t,label:a})=>{var l,o;const i=h?null===(o=null===(l=null==t?void 0:t[0])||void 0===l?void 0:l.payload)||void 0===o?void 0:o[h]:a;return Z?m.default.createElement(Z,{payload:null==t?void 0:t.map((e=>{var t;return Object.assign(Object.assign({},e),{color:null!==(t=re.get(i))&&void 0!==t?t:n.BaseColors.Gray})})),active:e,label:i}):m.default.createElement(r.default,{active:e,payload:t,label:i,valueFormatter:b,axis:{x:y,y:f,size:p},category:h,categoryColors:re})}:m.default.createElement(m.default.Fragment,null)}),p?m.default.createElement(a.ZAxis,{dataKey:p,type:"number",range:k,name:p}):null,le.map((e=>{var t,l;return m.default.createElement(a.Scatter,{className:u.tremorTwMerge(c.getColorClassNames(null!==(t=re.get(e))&&void 0!==t?t:n.BaseColors.Gray,s.colorPalette.text).fillColor,w?c.getColorClassNames(null!==(l=re.get(e))&&void 0!==l?l:n.BaseColors.Gray,s.colorPalette.text).strokeColor:"",R?"cursor-pointer":""),fill:`url(#${re.get(e)})`,fillOpacity:w?.7:1,key:e,name:e,data:h?g.filter((t=>t[h]===e)):g,isAnimationActive:q,animationDuration:D,shape:e=>((e,t,l)=>{const{cx:r,cy:o,width:n,node:s,fillOpacity:u,name:c}=e;return m.default.createElement(a.Dot,{cx:r,cy:o,r:n/2,opacity:t||l&&l!==c?i.deepEqual(t,s)?u:.3:u})})(e,J,U),onClick:ae})})),j?m.default.createElement(a.Legend,{verticalAlign:"top",height:$,content:({payload:e})=>l({payload:e},re,I,U,te?e=>{return t=e,void(te&&(t!==U||J?(ee(t),null==R||R({eventType:"category",categoryClicked:t})):(ee(void 0),null==R||R(null)),Q(void 0)));var t}:void 0,W)}):null):m.default.createElement(o,{noDataText:z})))}));v.displayName="ScatterChart",module.exports=v;
