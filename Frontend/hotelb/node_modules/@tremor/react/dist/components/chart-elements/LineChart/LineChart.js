'use client';
import{__rest as e}from"tslib";import t,{useState as a,Fragment as o}from"react";import{ResponsiveContainer as r,LineChart as n,CartesianGrid as l,XAxis as i,YAxis as s,Tooltip as c,Legend as d,Line as m,Dot as u}from"recharts";import k from"../common/ChartLegend.js";import p from"../common/ChartTooltip.js";import y from"../common/NoData.js";import{constructCategoryColors as v,hasOnlyOneValueForThisKey as h,getYAxisDomain as g}from"../common/utils.js";import{BaseColors as f}from"../../../lib/constants.js";import{themeColorRange as x,colorPalette as b}from"../../../lib/theme.js";import{tremorTwMerge as L}from"../../../lib/tremorTwMerge.js";import{getColorClassNames as w,defaultValueFormatter as E}from"../../../lib/utils.js";const T=t.forwardRef(((T,j)=>{const{data:N=[],categories:K=[],index:C,colors:A=x,valueFormatter:D=E,startEndOnly:G=!1,showXAxis:W=!0,showYAxis:O=!0,yAxisWidth:V=56,intervalType:S="equidistantPreserveStart",animationDuration:F=900,showAnimation:X=!1,showTooltip:M=!0,showLegend:P=!0,showGridLines:Y=!0,autoMinValue:q=!1,curveType:z="linear",minValue:H,maxValue:R,connectNulls:B=!1,allowDecimals:I=!0,noDataText:J,className:Q,onValueChange:U,enableLegendSlider:Z=!1,customTooltip:$,rotateLabelX:_,tickGap:ee=5}=T,te=e(T,["data","categories","index","colors","valueFormatter","startEndOnly","showXAxis","showYAxis","yAxisWidth","intervalType","animationDuration","showAnimation","showTooltip","showLegend","showGridLines","autoMinValue","curveType","minValue","maxValue","connectNulls","allowDecimals","noDataText","className","onValueChange","enableLegendSlider","customTooltip","rotateLabelX","tickGap"]),ae=$,oe=W||O?20:0,[re,ne]=a(60),[le,ie]=a(void 0),[se,ce]=a(void 0),de=v(K,A),me=g(q,H,R),ue=!!U;function ke(e){ue&&(e===se&&!le||h(N,e)&&le&&le.dataKey===e?(ce(void 0),null==U||U(null)):(ce(e),null==U||U({eventType:"category",categoryClicked:e})),ie(void 0))}return t.createElement("div",Object.assign({ref:j,className:L("w-full h-80",Q)},te),t.createElement(r,{className:"h-full w-full"},(null==N?void 0:N.length)?t.createElement(n,{data:N,onClick:ue&&(se||le)?()=>{ie(void 0),ce(void 0),null==U||U(null)}:void 0},Y?t.createElement(l,{className:L("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:!0,vertical:!1}):null,t.createElement(i,{padding:{left:oe,right:oe},hide:!W,dataKey:C,interval:G?"preserveStartEnd":S,tick:{transform:"translate(0, 6)"},ticks:G?[N[0][C],N[N.length-1][C]]:void 0,fill:"",stroke:"",className:L("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1,minTickGap:ee,angle:null==_?void 0:_.angle,dy:null==_?void 0:_.verticalShift,height:null==_?void 0:_.xAxisHeight}),t.createElement(s,{width:V,hide:!O,axisLine:!1,tickLine:!1,type:"number",domain:me,tick:{transform:"translate(-3, 0)"},fill:"",stroke:"",className:L("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickFormatter:D,allowDecimals:I}),t.createElement(c,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{stroke:"#d1d5db",strokeWidth:1},content:M?({active:e,payload:a,label:o})=>ae?t.createElement(ae,{payload:null==a?void 0:a.map((e=>{var t;return Object.assign(Object.assign({},e),{color:null!==(t=de.get(e.dataKey))&&void 0!==t?t:f.Gray})})),active:e,label:o}):t.createElement(p,{active:e,payload:a,label:o,valueFormatter:D,categoryColors:de}):t.createElement(t.Fragment,null),position:{y:0}}),P?t.createElement(d,{verticalAlign:"top",height:re,content:({payload:e})=>k({payload:e},de,ne,se,ue?e=>ke(e):void 0,Z)}):null,K.map((e=>{var a;return t.createElement(m,{className:L(w(null!==(a=de.get(e))&&void 0!==a?a:f.Gray,b.text).strokeColor),strokeOpacity:le||se&&se!==e?.3:1,activeDot:e=>{var a;const{cx:o,cy:r,stroke:n,strokeLinecap:l,strokeLinejoin:i,strokeWidth:s,dataKey:c}=e;return t.createElement(u,{className:L("stroke-tremor-background dark:stroke-dark-tremor-background",U?"cursor-pointer":"",w(null!==(a=de.get(c))&&void 0!==a?a:f.Gray,b.text).fillColor),cx:o,cy:r,r:5,fill:"",stroke:n,strokeLinecap:l,strokeLinejoin:i,strokeWidth:s,onClick:(t,a)=>function(e,t){t.stopPropagation(),ue&&(e.index===(null==le?void 0:le.index)&&e.dataKey===(null==le?void 0:le.dataKey)||h(N,e.dataKey)&&se&&se===e.dataKey?(ce(void 0),ie(void 0),null==U||U(null)):(ce(e.dataKey),ie({index:e.index,dataKey:e.dataKey}),null==U||U(Object.assign({eventType:"dot",categoryClicked:e.dataKey},e.payload))))}(e,a)})},dot:a=>{var r;const{stroke:n,strokeLinecap:l,strokeLinejoin:i,strokeWidth:s,cx:c,cy:d,dataKey:m,index:k}=a;return h(N,e)&&!(le||se&&se!==e)||(null==le?void 0:le.index)===k&&(null==le?void 0:le.dataKey)===e?t.createElement(u,{key:k,cx:c,cy:d,r:5,stroke:n,fill:"",strokeLinecap:l,strokeLinejoin:i,strokeWidth:s,className:L("stroke-tremor-background dark:stroke-dark-tremor-background",U?"cursor-pointer":"",w(null!==(r=de.get(m))&&void 0!==r?r:f.Gray,b.text).fillColor)}):t.createElement(o,{key:k})},key:e,name:e,type:z,dataKey:e,stroke:"",strokeWidth:2,strokeLinejoin:"round",strokeLinecap:"round",isAnimationActive:X,animationDuration:F,connectNulls:B})})),U?K.map((e=>t.createElement(m,{className:L("cursor-pointer"),strokeOpacity:0,key:e,name:e,type:z,dataKey:e,stroke:"transparent",fill:"transparent",legendType:"none",tooltipType:"none",strokeWidth:12,connectNulls:B,onClick:(e,t)=>{t.stopPropagation();const{name:a}=e;ke(a)}}))):null):t.createElement(y,{noDataText:J})))}));T.displayName="LineChart";export{T as default};
